    <html>
<head>
  <title>Vue.js Pet Depot</title>
  <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
  <script src="product.js"></script>
  <link rel="manifest" href="petstore.webmanifest">
  <link href="https://cdn.jsdelivr.net/npm/font-awesome-bundled@6.7.2/all.min.css" rel="stylesheet">

    <style>
      .product{
        border: 1px grey solid;
        padding: 10px;
        margin-bottom: 10px;
        text-align: center;

      }

        
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #35495e;
            color: white;
            padding: 1em 0;
            text-align: center;
        }
        main {
            padding: 1em;
            max-width: 600px;
            margin: auto;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        figure {
            text-align: center;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        h2 {
            color: #35495e;
        }
        button {
            background-color: #42b983;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
        }
        button:hover {
            background-color: #369870;
        }
        p.order-info {
            font-size: 1.2em;
            line-height: 1.5em;
            margin: 0.5em 0;
            
        }
        </style>
        <script>
        if('serviceWorker' in navigator){
    navigator.serviceWorker.register('serviceWorker.js');
};
        </script>

</head>
<body>
  <div id="app">
    <header>
      <h1 v-text="sitename"></h1>
      <button v-on:click="toggleCheckout">
        {{ cartItemCount }}
        <span class="fa-solid fa-cart-shopping"></span> Checkout
      </button>
    </header>
 
    <main>
      <!-- PRODUCT PAGE -->
      <div v-if='showProduct'>
        <div class="product" v-for="product in sortedProducts">
        <figure>
          <img v-bind:src="product.image">
        </figure>
        <h2 v-text="product.title"></h2>
        <p v-text="product.description"></p>
 
        <!-- Add to Cart Button -->
        <button v-on:click="addToCart(product)" v-if="canAddToCart(product)">Add to Cart</button>
        <button disabled v-else>Add to Cart (Sold Out)</button>
        <span v-if='product.availableInventory === cartCount(product.id)'> All Out !</span>
        <span v-else-if="product.availableInventory - cartCount(product.id) < 5"> Only {{ product.availableInventory - cartItemCount }} left !</span>
        <span v-else> Buy Now </span>
        <div>
          <span v-for="n in product.rating">★</span>
          <span v-for="n in 5 - product.rating">☆</span>
        </div>
        <p>Price: {{ product.price }}</p>
        </div>
      </div>
 
      <!-- CHECKOUT PAGE -->
      <div v-else>
        <h2>Checkout</h2>
        <p>
            <strong>First Name:</strong>
            <input v-model="order.firstName"/>
        </p>
        <p>
            <strong>Last Name:</strong>
            <input v-model="order.lastName"/>
        </p>
        <p>
            <strong>Address:</strong>
            <input v-model="order.address"/>
        </p>
        <p>
            <strong>City</strong>
            <input v-model="order.city"/>
        </p>
        <p>
            <strong>State:</strong>
            <select v-model="order.state" class="form-control">
                <option disabled value="">State</option>
                <option v-for="(state, key) in states"
                    v-bind:value="state">
                    {{ key }}
                </option>
            </select>
        </p>
        <p>
            <strong>Zip/Postal Code:</strong>
            <input v-model="order.zip"/>
        </p>
        <p><input  type="checkbox" id="gift" value="true" v-model="order.gift"
            v-bind:true-value="order.sendGift"
            v-bind:false-value="order.dontSendGift"/>
            <label for ="gift">This is a gift</label></p>
       
        <p><input type="radio" id="home" value="Home" v-model="order.method"/>
            <label for="home">Home</label>
            <input type="radio" id="business" value="Business" v-model="order.method"/>
            <label for="business">Business</label></p>
       
        <h2>Order Information</h2>
        <p>First Name: {{ order.firstName }}</p>
        <p>Last Name : {{ order.lastName }}</p>
        <p>Last Name : {{ order.address }}</p>
        <p>Last Name : {{ order.city }}</p>
        <p>Last Name : {{ order.zip }}</p>
        <p>Last Name : {{ order.state }}</p>
        <p>Shipping Method : {{ order.method }}</p>
        <p>Gift Option : {{ order.gift }}</p>
        <button v-on:click="submitFrom">Place Order</button>
        <p v-if="cartItemCount">You have {{ cartItemCount }} items in your cart</p>
        <p v-else>Your cart is empty</p>
        <button v-on:click="toggleCheckout">Continue shopping</button>
      </div>
    </main>
  </div>
 
  <script type="text/javascript">
    var webstore = new Vue({
      el: '#app',
      data: {
        showProduct: true,
        sitename: "Vue.js Pet Depot",
        order:{
          firstName: "",
          lastName: "",
          address: "",
          city: "",
          state: "",
          zip: "",
          method:'Home',
          gift:false,
          sendGift:'Send as a gift',
          dontSendGift:'Do not send as a gift'
        },
        products: products,
        states: {
          AL: "Alabama",
          AR: "Arkansas",
          CA: "California",
          NV: "Nevada"
        },
        cart: []
      },
      methods: {
        addToCart: function (product) {
          if (this.canAddToCart) {
            this.cart.push(product.id);
          }
        },
        toggleCheckout: function () {
          this.showProduct = !this.showProduct;
        },
        submitFrom() {
          alert("Order submitted ");
        },
        canAddToCart (product) {
          return product.availableInventory > this.cartCount(product.id);
        },
        cartCount(id){
          let count = 0;
          for(let i=0; i < this.cart.length; i++){
            if(this.cart[i] === id){
              count++;
            }
          }
          return count;
        }
      },
      computed: {
        cartItemCount() {
          return this.cart.length ;
        },
          sortedProducts() {
        let productsArray = this.products.slice(0);
        function compare(a, b) {
          if (a.price < b.price)
            return -1;
          if (a.price > b.price)
            return 1;
          return 0;
        }
        return productsArray.sort(compare);
      }
    
      }
    
    });
  </script>


</body>
</html>
    
    
    